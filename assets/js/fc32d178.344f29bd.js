"use strict";(self.webpackChunkOSM620=self.webpackChunkOSM620||[]).push([[61],{2208:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>a,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Labs/lab4","title":"Lab 4 - Implementing DNS","description":"Lab 4 - Implementing DNS","source":"@site/docs/Labs/lab4.md","sourceDirName":"Labs","slug":"/Labs/lab4","permalink":"/OSM620/Labs/lab4","draft":false,"unlisted":false,"editUrl":"https://github.com/catherine-leung/OERTemplate/tree/main/docs/Labs/lab4.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"lab4","title":"Lab 4 - Implementing DNS","sidebar_position":4,"description":"Lab 4 - Implementing DNS"},"sidebar":"courseNotesSidebar","previous":{"title":"Lab 3 - Security and Remote Connectivity","permalink":"/OSM620/Labs/lab3"},"next":{"title":"Lab 5 - Implementing DHCP","permalink":"/OSM620/Labs/lab5"}}');var i=s(4848),l=s(8453);const o={id:"lab4",title:"Lab 4 - Implementing DNS",sidebar_position:4,description:"Lab 4 - Implementing DNS"},t="Lab 4 - Implementing DNS",c={},d=[{value:"Investigation 1: Configuring DNS on Windows Server (<em>srv1</em>)",id:"investigation-1-configuring-dns-on-windows-server-srv1",level:2},{value:"Part 1: Setting a Static IP Address on <em>srv1</em>",id:"part-1-setting-a-static-ip-address-on-srv1",level:3},{value:"Part 2: Installing the DNS Server Role on <em>srv1</em>",id:"part-2-installing-the-dns-server-role-on-srv1",level:3},{value:"Part 3: Configuring a New DNS Zone",id:"part-3-configuring-a-new-dns-zone",level:3},{value:"Part 4: Adding Host (A) Records",id:"part-4-adding-host-a-records",level:3},{value:"Part 5: Configure DNS Forwarders on <em>srv1</em>",id:"part-5-configure-dns-forwarders-on-srv1",level:3},{value:"Part 6: Testing DNS Resolution and Entries Locally",id:"part-6-testing-dns-resolution-and-entries-locally",level:3},{value:"Investigation 2: Configuring Machines For DNS Use",id:"investigation-2-configuring-machines-for-dns-use",level:2},{value:"Part 1: Windows Server Core (srv2)",id:"part-1-windows-server-core-srv2",level:3},{value:"Part 3: Windows 11 Client (client1)",id:"part-3-windows-11-client-client1",level:3},{value:"Investigation 3: Configuring Reverse Lookup (PTR) Records",id:"investigation-3-configuring-reverse-lookup-ptr-records",level:2},{value:"Part 1: Create a Reverse Lookup Zone",id:"part-1-create-a-reverse-lookup-zone",level:3},{value:"Part 2: Add PTR Records for Each VM",id:"part-2-add-ptr-records-for-each-vm",level:3},{value:"Part 3: Test Reverse DNS Resolution",id:"part-3-test-reverse-dns-resolution",level:3}];function h(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"lab-4---implementing-dns",children:"Lab 4 - Implementing DNS"})}),"\n",(0,i.jsxs)(n.h2,{id:"investigation-1-configuring-dns-on-windows-server-srv1",children:["Investigation 1: Configuring DNS on Windows Server (",(0,i.jsx)(n.em,{children:"srv1"}),")"]}),"\n",(0,i.jsxs)(n.h3,{id:"part-1-setting-a-static-ip-address-on-srv1",children:["Part 1: Setting a Static IP Address on ",(0,i.jsx)(n.em,{children:"srv1"})]}),"\n",(0,i.jsxs)(n.p,{children:["As ",(0,i.jsx)(n.em,{children:"srv1"})," will be our primary network services provider, we have to give it a ",(0,i.jsx)(n.strong,{children:"static IP address"}),". This is so it doesn't periodically change; if this were to occur, any other machines relying on this one would suddenly be unable to connect and lose access to all services provided, including the very DNS we're about to set up!"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Note: You will be changing network information. It is best to do ",(0,i.jsx)(n.em,{children:"Part 1"})," directly on the machine, not through a remote connection."]})}),"\n",(0,i.jsx)(n.p,{children:"To set this server with an static IP address:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open Command Prompt and run the following: ",(0,i.jsx)(n.code,{children:"ipconfig /all"})]}),"\n",(0,i.jsxs)(n.li,{children:["Write down the current address information ",(0,i.jsx)(n.em,{children:"srv1"})," has:"]}),"\n",(0,i.jsx)(n.li,{children:"IPv4 address: 10.88.111.14"}),"\n",(0,i.jsx)(n.li,{children:"Subnet Mask: 255.255.255.0"}),"\n",(0,i.jsx)(n.li,{children:"Default Gateway: 10.88.111.254"}),"\n",(0,i.jsx)(n.li,{children:"DNS Servers: 66.207.192.6, 206.223.173.7"}),"\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.em,{children:"Server Manager"})," > ",(0,i.jsx)(n.em,{children:"Local Server"}),", in the ",(0,i.jsx)(n.em,{children:"Properties"})," area of the page, find the line entry: ",(0,i.jsx)(n.strong,{children:"Ethernet0"})]}),"\n",(0,i.jsxs)(n.li,{children:["Click the link next to it: ",(0,i.jsx)(n.strong,{children:"IPv4 address assigned by DHCP, IPv6 enabled"})]}),"\n",(0,i.jsxs)(n.li,{children:["This will open the ",(0,i.jsx)(n.em,{children:"Network Connections"})," window."]}),"\n",(0,i.jsxs)(n.li,{children:["Right-click on ",(0,i.jsx)(n.em,{children:"Ethernet0"})," and select ",(0,i.jsx)(n.strong,{children:"Properties"})," from the drop-down menu."]}),"\n",(0,i.jsxs)(n.li,{children:["In the new ",(0,i.jsx)(n.em,{children:"Ethernet0 Properties"})," window, click on the line item (",(0,i.jsx)(n.strong,{children:"not the checkbox"}),") for ",(0,i.jsx)(n.strong,{children:"Internet Protocol Version 4 (TCP/IPv4)"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Further down on the same window, find and click on the ",(0,i.jsx)(n.strong,{children:"Properties"})," button."]}),"\n",(0,i.jsxs)(n.li,{children:["In the new pop-up window ",(0,i.jsx)(n.em,{children:"Internet Protocol Version 4 (TCP/IPv4) Properties"}),", in the ",(0,i.jsx)(n.em,{children:"General"})," tab, select the ",(0,i.jsx)(n.strong,{children:"Use the following IP address:"})," option."]}),"\n",(0,i.jsxs)(n.li,{children:["Enter the following information in the fields below from your previously-written ",(0,i.jsx)(n.em,{children:"srv1"})," address information:"]}),"\n",(0,i.jsx)(n.li,{children:"IP address"}),"\n",(0,i.jsx)(n.li,{children:"Subnet mask"}),"\n",(0,i.jsx)(n.li,{children:"Default gateway"}),"\n",(0,i.jsxs)(n.li,{children:["Select the ",(0,i.jsx)(n.strong,{children:"Use the following DNS server addresses:"})," option."]}),"\n",(0,i.jsxs)(n.li,{children:["Enter the following information in the fields below from your previously-written ",(0,i.jsx)(n.em,{children:"srv1"})," address information:"]}),"\n",(0,i.jsxs)(n.li,{children:["Preferred DNS server: ",(0,i.jsx)(n.strong,{children:"127.0.0.1"})," (< This is important!)"]}),"\n",(0,i.jsx)(n.li,{children:"Alternate DNS server: Choose one from your written records, it doesn't matter which."}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"OK"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Back in the ",(0,i.jsx)(n.em,{children:"Ethernet0 Properties"})," window, click ",(0,i.jsx)(n.strong,{children:"Close"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Open ",(0,i.jsx)(n.em,{children:"Firefox"})," and go to ",(0,i.jsx)(n.strong,{children:"eff.org"})," to confirm you haven't lost Internet connectivity. If you can't access the page, go back through these steps or ask for help. Do not continue forward until this works!"]}),"\n",(0,i.jsxs)(n.li,{children:["Close the ",(0,i.jsx)(n.em,{children:"Network Connections"})," window."]}),"\n",(0,i.jsxs)(n.li,{children:["Verify your change in ",(0,i.jsx)(n.em,{children:"Server Manager > Local Server"}),'. The earlier line entry should now simply say your IP address instead of "assigned by DHCP".']}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"part-2-installing-the-dns-server-role-on-srv1",children:["Part 2: Installing the DNS Server Role on ",(0,i.jsx)(n.em,{children:"srv1"})]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Login to srv1"})," with your Administrator account."]}),"\n",(0,i.jsxs)(n.li,{children:["Open the ",(0,i.jsx)(n.strong,{children:"Server Manager"})," application (icon is on the taskbar or Start menu)."]}),"\n",(0,i.jsxs)(n.li,{children:["In the left menu, click on ",(0,i.jsx)(n.strong,{children:"Local Server"})," if you\u2019re not already there."]}),"\n",(0,i.jsxs)(n.li,{children:["At the top right, click ",(0,i.jsx)(n.strong,{children:"Manage > Add Roles and Features"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["In the ",(0,i.jsx)(n.strong,{children:"Add Roles and Features Wizard"})," window:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Installation Type"}),", select ",(0,i.jsx)(n.strong,{children:"Role-based or feature-based installation"}),", then ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Server Selection"}),", confirm ",(0,i.jsx)(n.strong,{children:"Select a server from the server pool"})," and choose ",(0,i.jsx)(n.strong,{children:"srv1"}),", then ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Server Roles"}),", scroll down and check the box for ",(0,i.jsx)(n.strong,{children:"DNS Server"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["A pop-up will ask to add required features, click ",(0,i.jsx)(n.strong,{children:"Add Features"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Back on the ",(0,i.jsx)(n.em,{children:"Server Roles"})," page, click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On the ",(0,i.jsx)(n.em,{children:"Features"})," page, leave defaults, click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On the ",(0,i.jsx)(n.em,{children:"DNS Server"})," page, read and click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On the ",(0,i.jsx)(n.em,{children:"Confirmation"})," page, click ",(0,i.jsx)(n.strong,{children:"Install"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Wait for installation to finish (may take a few minutes)."}),"\n",(0,i.jsxs)(n.li,{children:["When you see ",(0,i.jsx)(n.em,{children:"Installation succeeded on srv1"}),", click ",(0,i.jsx)(n.strong,{children:"Close"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-3-configuring-a-new-dns-zone",children:"Part 3: Configuring a New DNS Zone"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Back in ",(0,i.jsx)(n.strong,{children:"Server Manager"}),", in the top right, click ",(0,i.jsx)(n.strong,{children:"Tools > DNS"})," to open the DNS Manager."]}),"\n",(0,i.jsxs)(n.li,{children:["In the left pane, expand ",(0,i.jsx)(n.strong,{children:"srv1"})," and then ",(0,i.jsx)(n.strong,{children:"Forward Lookup Zones"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Right-click on ",(0,i.jsx)(n.strong,{children:"Forward Lookup Zones"})," and select ",(0,i.jsx)(n.strong,{children:"New Zone\u2026"})]}),"\n",(0,i.jsxs)(n.li,{children:["In the ",(0,i.jsx)(n.strong,{children:"New Zone Wizard"}),":","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Zone Type"}),", select ",(0,i.jsx)(n.strong,{children:"Primary zone"}),", click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Zone Name"}),", enter ",(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.em,{children:"yourSenecaUsername"}),".com"]}),", replacing ",(0,i.jsx)(n.em,{children:"yourSenecaUsername"})," with your actual username."]}),"\n",(0,i.jsxs)(n.li,{children:["For example, mine might be: ",(0,i.jsx)(n.strong,{children:"cjohnson30.com"})]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Zone File"}),", keep ",(0,i.jsx)(n.strong,{children:"Create a new file"})," selected, click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Dynamic Update"}),", keep ",(0,i.jsx)(n.strong,{children:"Do not allow dynamic updates"})," (default), then click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Finish"})," to create the zone."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-4-adding-host-a-records",children:"Part 4: Adding Host (A) Records"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.strong,{children:"DNS Manager"}),", expand your new ",(0,i.jsx)(n.strong,{children:"yourSenecaUsername.com"})," zone."]}),"\n",(0,i.jsxs)(n.li,{children:["Right-click in the right pane and select ",(0,i.jsx)(n.strong,{children:"New Host (A or AAAA)\u2026"})]}),"\n",(0,i.jsx)(n.li,{children:"For each of your lab VMs, create a record:"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"srv1"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Name: srv1"}),"\n",(0,i.jsx)(n.li,{children:"IP address: (Use the IPv4 address of srv1 from ipconfig)"}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Add Host"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"srv2"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Name: srv2"}),"\n",(0,i.jsx)(n.li,{children:"IP address: (Use the IPv4 address of srv2 from ipconfig)"}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Add Host"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"client1"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Name: client1"}),"\n",(0,i.jsx)(n.li,{children:"IP address: (Use the IPv4 address of client1 from ipconfig)"}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Add Host"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"When finished, you should see all three names listed in the zone."}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"part-5-configure-dns-forwarders-on-srv1",children:["Part 5: Configure DNS Forwarders on ",(0,i.jsx)(n.em,{children:"srv1"})]}),"\n",(0,i.jsxs)(n.p,{children:["We want ",(0,i.jsx)(n.em,{children:"srv1"})," to handle all DNS queries for our other machines, including locations on the Internet. To do this, we have to tell ",(0,i.jsx)(n.em,{children:"this"})," server where to look it if doesn't have the answer locally. If it can't answer locally, it will forward the request to an Internet-based DNS server."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.strong,{children:"DNS Manager"})," on srv1, right-click on your server\u2019s name in the left pane."]}),"\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"Properties"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Go to the ",(0,i.jsx)(n.strong,{children:"Forwarders"})," tab."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Edit\u2026"})]}),"\n",(0,i.jsxs)(n.li,{children:["In the ",(0,i.jsx)(n.em,{children:"IP address"})," field, enter the IP address from your earlier list, then hit ",(0,i.jsx)(n.strong,{children:"Enter"})," for it to verified. If it can reach it, you should see a domain name populate next to the IP address."]}),"\n",(0,i.jsxs)(n.li,{children:["Add a second DNS for fallback, using Google's DNS: ",(0,i.jsx)(n.strong,{children:"8.8.8.8"})]}),"\n",(0,i.jsxs)(n.li,{children:["Make sure Google's DNS is the ",(0,i.jsx)(n.strong,{children:"second"})," entry in the list."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"OK"})," to add."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"OK"})," again to close Properties."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-6-testing-dns-resolution-and-entries-locally",children:"Part 6: Testing DNS Resolution and Entries Locally"}),"\n",(0,i.jsx)(n.p,{children:"Our first task is to confirm this works locally by telling the server to talk to itself first for DNS resolution. This lets us test our DNS service and records while removing the network and firewall pieces."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open ",(0,i.jsx)(n.strong,{children:"Command Prompt"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"To test DNS resolution functionality, run the following commands one at a time:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"nslookup srv1.cjohnson30.com\nnslookup srv2.cjohnson30.com\nnslookup client1.cjohnson30.com\nnslookup eff.org\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:"If each returns the proper IP address value, you're done! If not, revisit your earlier configuration steps and check to see what might be missing."}),"\n",(0,i.jsx)(n.li,{children:"Don't be afraid to ask for help!"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"investigation-2-configuring-machines-for-dns-use",children:"Investigation 2: Configuring Machines For DNS Use"}),"\n",(0,i.jsx)(n.h3,{id:"part-1-windows-server-core-srv2",children:"Part 1: Windows Server Core (srv2)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Log in as Administrator."}),"\n",(0,i.jsx)(n.li,{children:"At the prompt, run:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"Get-NetIPAddress\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["Look for the section that contains ",(0,i.jsx)(n.em,{children:"srv2"}),"'s normal IP address. Make a note of the ",(0,i.jsx)(n.strong,{children:"InterfaceIndex"})," number just below it. (For example, 4. Yours may differ.)"]}),"\n",(0,i.jsx)(n.li,{children:"Set the DNS server to srv1\u2019s IP (replace X.X.X.X with srv1\u2019s actual address, and 4 with your NIC\u2019s ifIndex):"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"Set-DnsClientServerAddress -InterfaceIndex 4 -ServerAddresses 192.168.1.14\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"Confirm the change:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"Get-DnsClientServerAddress\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"To test DNS resolution functionality, run the following commands one at a time:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"nslookup srv1.cjohnson30.com\nnslookup srv2.cjohnson30.com\nnslookup client1.cjohnson30.com\nnslookup eff.org\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:"If each returns the proper IP address value, you're done! If not, revisit your earlier configuration steps and check to see what might be missing."}),"\n",(0,i.jsx)(n.li,{children:"Don't be afraid to ask for help!"}),"\n",(0,i.jsx)(n.li,{children:"Last, ping each other machine to prove you no longer need to remember IP addresses:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ms-dos",children:"ping srv1.cjohnson30.com\nping client1.cjohnson30.com\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"13",children:["\n",(0,i.jsx)(n.li,{children:"Cool, right?"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-3-windows-11-client-client1",children:"Part 3: Windows 11 Client (client1)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Login as Administrator."}),"\n",(0,i.jsxs)(n.li,{children:["Right-click the ",(0,i.jsx)(n.strong,{children:"Network"})," icon in the system tray, click ",(0,i.jsx)(n.strong,{children:"Network and Internet settings"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Ethernet"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Scroll down to ",(0,i.jsx)(n.em,{children:"DNS server assignment"})," and click the ",(0,i.jsx)(n.strong,{children:"Edit"})," button next to it."]}),"\n",(0,i.jsxs)(n.li,{children:["In the ",(0,i.jsx)(n.em,{children:"Edit DNS settings"})," pop-up window, click the drop-down menu to change it from ",(0,i.jsx)(n.em,{children:"Automatic (DHCP)"})," to ",(0,i.jsx)(n.strong,{children:"Manual"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Find the new ",(0,i.jsx)(n.em,{children:"IPv4"})," option and toggle it ",(0,i.jsx)(n.strong,{children:"On"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["In the ",(0,i.jsx)(n.em,{children:"Preferred DNS"})," field, enter the ",(0,i.jsx)(n.em,{children:"srv1"})," IP address."]}),"\n",(0,i.jsxs)(n.li,{children:["Leave all others on their defaults and click ",(0,i.jsx)(n.strong,{children:"Save"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Open Command Prompt and type:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ms-dos",children:"ipconfig /flushdns\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"9",children:["\n",(0,i.jsx)(n.li,{children:"To test DNS resolution functionality, run the following commands one at a time:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ms-dos",children:"nslookup srv1.cjohnson30.com\nnslookup srv2.cjohnson30.com\nnslookup client1.cjohnson30.com\nnslookup eff.org\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"10",children:["\n",(0,i.jsx)(n.li,{children:"If each returns the proper IP address value, you're done! If not, revisit your earlier configuration steps and check to see what might be missing."}),"\n",(0,i.jsx)(n.li,{children:"Don't be afraid to ask for help!"}),"\n",(0,i.jsx)(n.li,{children:"Last, ping each server to prove you no longer need to remember IP addresses:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ms-dos",children:"ping srv1.cjohnson30.com\nping srv2.cjohnson30.com\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"13",children:["\n",(0,i.jsx)(n.li,{children:"Cool, right?"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"investigation-3-configuring-reverse-lookup-ptr-records",children:"Investigation 3: Configuring Reverse Lookup (PTR) Records"}),"\n",(0,i.jsx)(n.h3,{id:"part-1-create-a-reverse-lookup-zone",children:"Part 1: Create a Reverse Lookup Zone"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.strong,{children:"DNS Manager"})," on ",(0,i.jsx)(n.em,{children:"srv1"}),", right-click ",(0,i.jsx)(n.strong,{children:"Reverse Lookup Zones"})," in the left pane."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"New Zone\u2026"})]}),"\n",(0,i.jsxs)(n.li,{children:["In the ",(0,i.jsx)(n.strong,{children:"New Zone Wizard"}),":","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Zone Type"}),", select ",(0,i.jsx)(n.strong,{children:"Primary zone"}),". Click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Reverse Lookup Zone Name"}),", choose ",(0,i.jsx)(n.strong,{children:"IPv4 Reverse Lookup Zone"}),". Click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Network ID"}),", enter the first three octets of your VMs\u2019 subnet (for example, if your VMs\u2019 IPs are 192.168.131.x, enter 192.168.131). Click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Zone File"}),", keep defaults. Click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"Dynamic Update"}),", keep defaults (Do not allow dynamic updates). Click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Finish"})," to create the zone."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-2-add-ptr-records-for-each-vm",children:"Part 2: Add PTR Records for Each VM"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"We're going to automatically add PTR records using our existing A records for ease of use."}),"\n",(0,i.jsxs)(n.li,{children:["Inside the ",(0,i.jsx)(n.em,{children:"Forward Lookup Zones"}),", in the ",(0,i.jsx)(n.strong,{children:"cjohnson30.com"})," zone, right-click each A record you created (srv1, srv2, client1) and select ",(0,i.jsx)(n.strong,{children:"Properties"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Check the box next to ",(0,i.jsx)(n.strong,{children:"\u201cUpdate associated pointer (PTR) record\u201d"})," and click ",(0,i.jsx)(n.strong,{children:"OK"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["If the box was already checked, uncheck it, click ",(0,i.jsx)(n.strong,{children:"Apply"}),", check it again, then click ",(0,i.jsx)(n.strong,{children:"Apply"})," again. This forces the PTR generation."]}),"\n",(0,i.jsx)(n.li,{children:"This should automatically create PTR records in your new reverse zone."}),"\n",(0,i.jsxs)(n.li,{children:["Double-check your work. Click on the folder inside ",(0,i.jsx)(n.em,{children:"Reverse Lookup Zone"})," to see its contents. If empty, right-click on the folder and click ",(0,i.jsx)(n.em,{children:"Refresh"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"They should now appear. If they do not, retrace your steps of ask for help."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-3-test-reverse-dns-resolution",children:"Part 3: Test Reverse DNS Resolution"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"srv2"}),", open PowerShell."]}),"\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.strong,{children:"nslookup"})," on each VM's IP address:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"nslookup 192.168.1.14\nnslookup 192.168.1.15\nnslookup 192.168.1.16\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"You should see the PTR record and corresponding hostname for each IP address."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Output"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"Server:  srv1.cjohnson30.com\nAddress:  10.88.111.14\n\nName:    client1.cjohnson30.com\nAddress:  10.88.111.15\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:'Notice that the server entry no longer says "UnKnown" as it did before. Now it can identify itself!'}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Congratulations, you've now set up basic DNS services from ",(0,i.jsx)(n.em,{children:"srv1"})," to each VM in your environment!"]})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>t});var r=s(6540);const i={},l=r.createContext(i);function o(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);
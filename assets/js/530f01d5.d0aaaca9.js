"use strict";(self.webpackChunkOSM620=self.webpackChunkOSM620||[]).push([[461],{8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>t});var r=s(6540);const i={},l=r.createContext(i);function o(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(l.Provider,{value:n},e.children)}},9597:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>a,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Labs/lab6","title":"Lab 6 - Active Directory","description":"Lab 6 - Active Directory","source":"@site/docs/Labs/lab6.md","sourceDirName":"Labs","slug":"/Labs/lab6","permalink":"/OSM620/Labs/lab6","draft":false,"unlisted":false,"editUrl":"https://github.com/catherine-leung/OERTemplate/tree/main/docs/Labs/lab6.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"lab6","title":"Lab 6 - Active Directory","sidebar_position":6,"description":"Lab 6 - Active Directory"},"sidebar":"courseNotesSidebar","previous":{"title":"Lab 5 - Implementing DHCP","permalink":"/OSM620/Labs/lab5"},"next":{"title":"Assignment 1","permalink":"/OSM620/Assignments/assignment1"}}');var i=s(4848),l=s(8453);const o={id:"lab6",title:"Lab 6 - Active Directory",sidebar_position:6,description:"Lab 6 - Active Directory"},t="Lab 6 - Active Directory",d={},c=[{value:"Lab Preparation",id:"lab-preparation",level:2},{value:"Purpose of Lab 6",id:"purpose-of-lab-6",level:3},{value:"Objectives",id:"objectives",level:3},{value:"Minimum Progression Requirements",id:"minimum-progression-requirements",level:3},{value:"Before You Begin",id:"before-you-begin",level:3},{value:"Investigation 1: Adding the <em>router</em> VM",id:"investigation-1-adding-the-router-vm",level:2},{value:"VM Specifications",id:"vm-specifications",level:3},{value:"Part 1: Create <em>router</em> VM",id:"part-1-create-router-vm",level:3},{value:"Part 2: Configuring Routing",id:"part-2-configuring-routing",level:3},{value:"Investigation 2: Create srv3 VM",id:"investigation-2-create-srv3-vm",level:2},{value:"Part 1: Cloning in VMware",id:"part-1-cloning-in-vmware",level:3},{value:"Part 2: Cleaning the Clone (srv3)",id:"part-2-cleaning-the-clone-srv3",level:3},{value:"Part 3: Configuring srv3",id:"part-3-configuring-srv3",level:3},{value:"Investigation 3: Convert srv1 to a Management Server",id:"investigation-3-convert-srv1-to-a-management-server",level:2},{value:"Part 1: Removing Old Roles",id:"part-1-removing-old-roles",level:3},{value:"Part 2: Hardware Changes for srv1",id:"part-2-hardware-changes-for-srv1",level:3},{value:"Part 3: Network Configuration (srv1)",id:"part-3-network-configuration-srv1",level:3},{value:"Investigation 4: Convert srv2 to AD DC1",id:"investigation-4-convert-srv2-to-ad-dc1",level:2},{value:"Part 1: Network Reconfiguration (srv2)",id:"part-1-network-reconfiguration-srv2",level:3},{value:"Part 2: Installing AD and DC Promotion",id:"part-2-installing-ad-and-dc-promotion",level:3},{value:"Investigation 5: Manage srv2 from srv1 GUI",id:"investigation-5-manage-srv2-from-srv1-gui",level:2},{value:"Part 1: Join srv1 to the new domain",id:"part-1-join-srv1-to-the-new-domain",level:3},{value:"Part 2: Setup srv1 as a GUI Management Server for srv2",id:"part-2-setup-srv1-as-a-gui-management-server-for-srv2",level:3},{value:"Part 3: Configure DNS on srv2 with srv1",id:"part-3-configure-dns-on-srv2-with-srv1",level:3},{value:"Part 4: Configure DHCP on <em>srv2</em> with <em>srv1</em>",id:"part-4-configure-dhcp-on-srv2-with-srv1",level:3},{value:"Investigation 6: Add laptop1 to Domain",id:"investigation-6-add-laptop1-to-domain",level:3},{value:"Part 1: Setting Proper Network Configuration",id:"part-1-setting-proper-network-configuration",level:3},{value:"Part 2: Domain Join for laptop1",id:"part-2-domain-join-for-laptop1",level:3},{value:"Part 3: Confirm laptop1 is in DNS",id:"part-3-confirm-laptop1-is-in-dns",level:3},{value:"Investigation 7: Convert <em>srv3</em> to AD DC2",id:"investigation-7-convert-srv3-to-ad-dc2",level:3},{value:"Part 1: Domain Join for <em>srv3</em>",id:"part-1-domain-join-for-srv3",level:3},{value:"Part 2: Install AD and DC Promotion (srv3)",id:"part-2-install-ad-and-dc-promotion-srv3",level:3},{value:"Part 3: Confirm DNS replication",id:"part-3-confirm-dns-replication",level:3},{value:"Investigation 8: Test Without srv1",id:"investigation-8-test-without-srv1",level:2},{value:"Lab 6 Sign-Off",id:"lab-6-sign-off",level:3},{value:"Sign-Off Checklist",id:"sign-off-checklist",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"lab-6---active-directory",children:"Lab 6 - Active Directory"})}),"\n",(0,i.jsx)(n.h2,{id:"lab-preparation",children:"Lab Preparation"}),"\n",(0,i.jsx)(n.h3,{id:"purpose-of-lab-6",children:"Purpose of Lab 6"}),"\n",(0,i.jsxs)(n.p,{children:["In this lab, you\u2019ll redesign and configure your environment to a more realistic, low-footprint, on-premises design. You\u2019ll move core network services off ",(0,i.jsx)(n.strong,{children:"srv1"})," and into ",(0,i.jsx)(n.strong,{children:"Active Directory"})," by promoting ",(0,i.jsx)(n.strong,{children:"srv2"})," to ",(0,i.jsx)(n.strong,{children:"Domain Controller (DC1)"})," with integrated ",(0,i.jsx)(n.strong,{children:"DNS"})," and ",(0,i.jsx)(n.strong,{children:"DHCP"}),", manage everything remotely from ",(0,i.jsx)(n.strong,{children:"srv1"})," using ",(0,i.jsx)(n.strong,{children:"RSAT"}),", and prove end-to-end client functionality by joining ",(0,i.jsx)(n.strong,{children:"laptop1"})," to the domain."]}),"\n",(0,i.jsxs)(n.p,{children:["You\u2019ll also prepare a clean clone (",(0,i.jsx)(n.strong,{children:"srv3"}),") and promote it to ",(0,i.jsx)(n.strong,{children:"DC2"})," for redundancy."]}),"\n",(0,i.jsxs)(n.p,{children:["The lightweight ",(0,i.jsx)(n.strong,{children:"router"})," VM you'll create replaces RRAS/NAT, mirroring how real sites use a dedicated edge device."]}),"\n",(0,i.jsx)(n.h3,{id:"objectives",children:"Objectives"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this lab, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Build a minimal ",(0,i.jsx)(n.strong,{children:"VyOS router"})," VM and configure LAN/WAN, default route, and NAT for Internet access."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Configure a consistent ",(0,i.jsx)(n.strong,{children:"IP plan"})," (gateway 10.0.UID.254, statics for servers, DHCP range for clients)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Promote ",(0,i.jsx)(n.strong,{children:"srv2"})," to ",(0,i.jsx)(n.strong,{children:"AD DS"})," as the first domain controller for ",(0,i.jsx)(n.strong,{children:"yourSenecaUsername.com"})," with integrated ",(0,i.jsx)(n.strong,{children:"DNS"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Configure ",(0,i.jsx)(n.strong,{children:"DNS forwarders"})," and create a ",(0,i.jsx)(n.strong,{children:"reverse lookup zone"})," with ",(0,i.jsx)(n.strong,{children:"Secure only"})," dynamic updates."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Convert ",(0,i.jsx)(n.strong,{children:"srv1"})," into a ",(0,i.jsx)(n.strong,{children:"management server"})," (RSAT only) and manage ",(0,i.jsx)(n.strong,{children:"srv2"})," remotely via ",(0,i.jsx)(n.strong,{children:"Server Manager"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Join ",(0,i.jsx)(n.strong,{children:"srv1"})," and ",(0,i.jsx)(n.strong,{children:"laptop1"})," to the domain and verify ",(0,i.jsx)(n.strong,{children:"Kerberos + name resolution"})," end-to-end."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Validate DNS registration: confirm ",(0,i.jsx)(n.strong,{children:"A"})," and ",(0,i.jsx)(n.strong,{children:"PTR"})," records for servers and client populate correctly."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Use GUI tools (",(0,i.jsx)(n.strong,{children:"DNS"}),", ",(0,i.jsx)(n.strong,{children:"DHCP"}),", ",(0,i.jsx)(n.strong,{children:"ADUC/AD DS"}),") to administer services from ",(0,i.jsx)(n.strong,{children:"srv1"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Clone ",(0,i.jsx)(n.strong,{children:"srv3"}),", join it to the domain, promote it to ",(0,i.jsx)(n.strong,{children:"DC2 (GC + DNS)"}),", and verify DNS replication."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"minimum-progression-requirements",children:"Minimum Progression Requirements"}),"\n",(0,i.jsx)(n.p,{children:"Before beginning, you must have:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Successfully completed ",(0,i.jsx)(n.em,{children:"Labs 1-5"})," and ",(0,i.jsx)(n.em,{children:"Assignment 1"}),"."]})}),"\n",(0,i.jsxs)(n.li,{children:["Attended the ",(0,i.jsx)(n.strong,{children:"Week 8 - Active Directory"})," lecture."]}),"\n",(0,i.jsx)(n.li,{children:"Your external SSD (or personal computer) with your VMs."}),"\n",(0,i.jsx)(n.li,{children:"Your OSM620 Lab Logbook."}),"\n",(0,i.jsx)(n.li,{children:"Optional, but recommended: Caffeine delivery system."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"before-you-begin",children:"Before You Begin"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Time to Backup!"})," ",(0,i.jsx)(n.em,{children:"You will be making major changes to all virtual machines."})," This is a good time to backup these VMs so you can restore from them if something catastrophic occurs."]}),"\n",(0,i.jsxs)(n.p,{children:["With all VMs turned off, copy the entire ",(0,i.jsx)(n.code,{children:"Virtual Machines"})," folder on your SSD to a separate location. This can be a backup directory on your SSD, or even a separate physical drive. Leave the copy be and use the original going forward. (If you need space, compress the backup folder.)"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Do not continue until the copy has fully completed."})}),"\n",(0,i.jsxs)(n.h2,{id:"investigation-1-adding-the-router-vm",children:["Investigation 1: Adding the ",(0,i.jsx)(n.em,{children:"router"})," VM"]}),"\n",(0,i.jsx)(n.p,{children:"In this investigation, we'll be adding a Linux-based router to our setup. This low-footprint virtual machine will take the place of the RRAS NAT work you did in previous labs. Most on-premises installations (offices, warehouses, schools) will have a physical router that does this instead of relying on Windows Server to do that work."}),"\n",(0,i.jsx)(n.p,{children:"Setting this up is extremely easy and should only take a few minutes."}),"\n",(0,i.jsx)(n.p,{children:"After you're done, you will need to have this VM powered on during all lab work. I'll remind you of this often."}),"\n",(0,i.jsx)(n.h3,{id:"vm-specifications",children:"VM Specifications"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Setting"}),(0,i.jsx)(n.th,{children:"Value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"VM Name"}),(0,i.jsx)(n.td,{children:"router"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Role"}),(0,i.jsx)(n.td,{children:"Router / NAT (edge)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"OS / Image"}),(0,i.jsx)(n.td,{children:"VyOS (current stable ISO)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"vCPU"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RAM"}),(0,i.jsx)(n.td,{children:"512 MB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Disk"}),(0,i.jsx)(n.td,{children:"20 GB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"NICs"}),(0,i.jsx)(n.td,{children:"2"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"NIC1"}),(0,i.jsx)(n.td,{children:"VMware NAT"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"NIC2"}),(0,i.jsx)(n.td,{children:"VMnet10"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"NIC2 IPv4"}),(0,i.jsxs)(n.td,{children:[(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".254/24"]})," (static)"]})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"Instructions to set this up are provided below."}),"\n",(0,i.jsxs)(n.h3,{id:"part-1-create-router-vm",children:["Part 1: Create ",(0,i.jsx)(n.em,{children:"router"})," VM"]}),"\n",(0,i.jsx)(n.p,{children:"Here we'll create the VM appliance."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Reminder"}),": Remember to create a new ",(0,i.jsx)(n.em,{children:"router"})," folder on your SSD for the VM files!"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Download the VyOS ISO: ",(0,i.jsx)(n.a,{href:"https://community-downloads.vyos.dev/stream/1.5-stream-2025-Q2/vyos-1.5-stream-2025-Q2-generic-amd64.iso",children:"https://community-downloads.vyos.dev/stream/1.5-stream-2025-Q2/vyos-1.5-stream-2025-Q2-generic-amd64.iso"})]}),"\n",(0,i.jsxs)(n.li,{children:["Create a new VMware VM with the following:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["ISO: ",(0,i.jsx)(n.strong,{children:"VyOS ISO image"})]}),"\n",(0,i.jsxs)(n.li,{children:["Type: ",(0,i.jsx)(n.strong,{children:"Debian 12.x 64-bit"})]}),"\n",(0,i.jsxs)(n.li,{children:["Boot firmware: ",(0,i.jsx)(n.strong,{children:"UEFI"})]}),"\n",(0,i.jsxs)(n.li,{children:["Name: ",(0,i.jsx)(n.strong,{children:"router"})]}),"\n",(0,i.jsxs)(n.li,{children:["CPU: ",(0,i.jsx)(n.strong,{children:"1 core"})]}),"\n",(0,i.jsxs)(n.li,{children:["RAM: ",(0,i.jsx)(n.strong,{children:"512 MB"})]}),"\n",(0,i.jsxs)(n.li,{children:["CPU > IOMMU: ",(0,i.jsx)(n.strong,{children:"Enable"})]}),"\n",(0,i.jsxs)(n.li,{children:["CPU > Enable hypervisor: ",(0,i.jsx)(n.strong,{children:"Disabled"})]}),"\n",(0,i.jsxs)(n.li,{children:["Storage: ",(0,i.jsx)(n.strong,{children:"20 GB"})]}),"\n",(0,i.jsxs)(n.li,{children:["NIC1: ",(0,i.jsx)(n.strong,{children:"NAT"})]}),"\n",(0,i.jsxs)(n.li,{children:["NIC2: ",(0,i.jsx)(n.strong,{children:"VMnet10"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Power on VM."}),"\n",(0,i.jsxs)(n.li,{children:["In the boot menu, select the first option: ",(0,i.jsx)(n.strong,{children:"Live system (vyos)"})]}),"\n",(0,i.jsxs)(n.li,{children:["Login with these credentials:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Username: ",(0,i.jsx)(n.strong,{children:"vyos"})]}),"\n",(0,i.jsxs)(n.li,{children:["Password: ",(0,i.jsx)(n.strong,{children:"vyos"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Install VyOS on the disk using this command: ",(0,i.jsx)(n.code,{children:"install image"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Would you like to continue?: ",(0,i.jsx)(n.strong,{children:"y"})]}),"\n",(0,i.jsxs)(n.li,{children:["What would you like to name this image?: ",(0,i.jsx)(n.strong,{children:"Just hit Enter to select the default"})]}),"\n",(0,i.jsxs)(n.li,{children:['Please enter a password for the "vyos" user: ',(0,i.jsx)(n.em,{children:"yourNormalAdminPassword"})]}),"\n",(0,i.jsxs)(n.li,{children:["What console should be used as default?: ",(0,i.jsx)(n.strong,{children:"Hit Enter to select default"})]}),"\n",(0,i.jsxs)(n.li,{children:["Which one should be used for installation?: ",(0,i.jsx)(n.strong,{children:"Enter to select default"})]}),"\n",(0,i.jsxs)(n.li,{children:["Installation will delete all data on the drive. Continue?: ",(0,i.jsx)(n.strong,{children:"y"})]}),"\n",(0,i.jsxs)(n.li,{children:["Would you like to use all the free space on this drive:? ",(0,i.jsx)(n.strong,{children:"y"})]}),"\n",(0,i.jsxs)(n.li,{children:["What would you like to use as boot config?: ",(0,i.jsx)(n.strong,{children:"Enter to select default"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["The installation proceeds (it's very fast). When finished, reboot: ",(0,i.jsx)(n.code,{children:"sudo reboot"})]}),"\n",(0,i.jsx)(n.li,{children:"Wait for the machine OS to boot up again."}),"\n",(0,i.jsxs)(n.li,{children:["Use the following credentials for your new VM:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Username: ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"vyos"})})]}),"\n",(0,i.jsxs)(n.li,{children:["Password: ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"yourNormalAdminPassword"})})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-2-configuring-routing",children:"Part 2: Configuring Routing"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Power on router VM and login. (If you haven't already.)"}),"\n",(0,i.jsx)(n.li,{children:"Run the following commands ONE AT A TIME (Replace UID!):"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"configure\nset interface ethernet eth0 address dhcp\nset system name-server eth0\nset interface ethernet eth1 address 10.0.UID.254/24\nset nat source rule 20 outbound-interface name eth0\nset nat source rule 20 source address 10.0.UID.0/24\nset nat source rule 20 translation address 'masquerade'\nset system ipv6 disable \ncommit\nsave\nexit\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Figure 1. Example of VyOS commands"})}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["Check your router can access the Internet: ",(0,i.jsx)(n.code,{children:"ping eff.org"})]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Figure 2. Proper ping completion"})}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"If it receives proper ping, move on to the next step. If not, ask for help!"}),"\n",(0,i.jsxs)(n.li,{children:["Log out: ",(0,i.jsx)(n.code,{children:"exit"})]}),"\n",(0,i.jsx)(n.li,{children:"Keep this VM up! Minimize and move on to the next Investigation."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Congratulations! You now have a NAT router VM that uses minimal resources."}),"\n",(0,i.jsx)(n.h2,{id:"investigation-2-create-srv3-vm",children:"Investigation 2: Create srv3 VM"}),"\n",(0,i.jsxs)(n.p,{children:["In this investigation, we're going to clone ",(0,i.jsx)(n.em,{children:"srv2"}),", reset it to defaults, then configure the clone with ",(0,i.jsx)(n.em,{children:"srv3"})," information."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Do not create the VM below from scratch!"})," This is just for quick reference."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Setting"}),(0,i.jsx)(n.th,{children:"Value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"VM Name"}),(0,i.jsx)(n.td,{children:"srv3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Role"}),(0,i.jsx)(n.td,{children:"Windows Server Core #2"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"vCPU"}),(0,i.jsx)(n.td,{children:"2"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RAM"}),(0,i.jsx)(n.td,{children:"4 GB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Disk"}),(0,i.jsx)(n.td,{children:"250 GB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"NICs"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"NIC1"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"Removed"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"NIC2"}),(0,i.jsx)(n.td,{children:"VMnet10"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"NIC2 IPv4"}),(0,i.jsxs)(n.td,{children:[(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".3"]})," (static)"]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"part-1-cloning-in-vmware",children:"Part 1: Cloning in VMware"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Shut down ALL VMs except the router."}),"\n",(0,i.jsxs)(n.li,{children:["Create a new folder inside Virtual Machines on your SSD and call it: ",(0,i.jsx)(n.em,{children:"srv3-yourSenecaUsername"})]}),"\n",(0,i.jsxs)(n.li,{children:["In VMware Workstation, right-click on ",(0,i.jsx)(n.em,{children:"srv2"})," and select: ",(0,i.jsx)(n.strong,{children:"Create Full Clone"})]}),"\n",(0,i.jsxs)(n.li,{children:["Rename when asked to: ",(0,i.jsx)(n.strong,{children:"srv3-yourSenecaUsername"})]}),"\n",(0,i.jsxs)(n.li,{children:["Save it inside: ",(0,i.jsx)(n.strong,{children:"Virtual Machines/srv3-yourSenecaUsername/"})]}),"\n",(0,i.jsx)(n.li,{children:"This may take several minutes to complete."}),"\n",(0,i.jsxs)(n.li,{children:["Once complete, change the following hardware (do not power on):","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Remove NIC1 (External Network)"}),"\n",(0,i.jsxs)(n.li,{children:["Confirm hardware:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["CPU: ",(0,i.jsx)(n.strong,{children:"2 cores"})]}),"\n",(0,i.jsxs)(n.li,{children:["RAM: ",(0,i.jsx)(n.strong,{children:"4 GB"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-2-cleaning-the-clone-srv3",children:"Part 2: Cleaning the Clone (srv3)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Power on and login."}),"\n",(0,i.jsx)(n.li,{children:"Exit to PowerShell."}),"\n",(0,i.jsxs)(n.li,{children:["Run the following command: ",(0,i.jsx)(n.code,{children:"C:\\Windows\\System32\\Sysprep\\Sysprep.exe /oobe /generalize /shutdown"})]}),"\n",(0,i.jsxs)(n.li,{children:["This will take a ",(0,i.jsx)(n.em,{children:"very"})," long time, around 10 minutes. When complete, the computer will shut down."]}),"\n",(0,i.jsxs)(n.li,{children:["Power on ",(0,i.jsx)(n.em,{children:"srv3"})," again."]}),"\n",(0,i.jsx)(n.li,{children:"It will ask you to change the login password. Just use the same you've been using before. (Tab to go to the next field, then Enter to send both fields.)"}),"\n",(0,i.jsx)(n.li,{children:"When asked about diagnostics, select option 1 (Required only)"}),"\n",(0,i.jsxs)(n.li,{children:["Your scrubbed ",(0,i.jsx)(n.em,{children:"srv3"})," will now start up."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-3-configuring-srv3",children:"Part 3: Configuring srv3"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Login to ",(0,i.jsx)(n.em,{children:"srv3"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Stay in ",(0,i.jsx)(n.em,{children:"sconfig"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Change the computer name to to ",(0,i.jsx)(n.em,{children:"srv3"}),". (",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"not srv3-yourSenecaUsername!"})}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The computer restarts."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"After restart, log back in."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Change your network adapter settings to the following:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Name: ",(0,i.jsx)(n.strong,{children:"Internal Network"})]}),"\n",(0,i.jsxs)(n.li,{children:["IP address: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".3"]})]}),"\n",(0,i.jsxs)(n.li,{children:["Subnet: ",(0,i.jsx)(n.strong,{children:"255.255.255.0"})]}),"\n",(0,i.jsxs)(n.li,{children:["Gateway: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".254"]})]}),"\n",(0,i.jsxs)(n.li,{children:["DNS1: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".2"]})]}),"\n",(0,i.jsxs)(n.li,{children:["DNS2: ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Blank"})})]}),"\n",(0,i.jsxs)(n.li,{children:["DNS3: ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"Blank"})})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Exit to PowerShell"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Check Internet connection by running: ",(0,i.jsx)(n.code,{children:"ping 173.239.79.200"})]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," DNS won't work yet, that's okay."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If Step 23 worked, go back to sconfig and shutdown the system."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Keep this VM powered off until told otherwise."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"investigation-3-convert-srv1-to-a-management-server",children:"Investigation 3: Convert srv1 to a Management Server"}),"\n",(0,i.jsxs)(n.p,{children:["In this investigation, we'll remove all our network services from Labs 1-5 and turn ",(0,i.jsx)(n.em,{children:"srv1"})," into a ",(0,i.jsx)(n.strong,{children:"Management Server"}),". Essentially, a GUI that let's us control other servers remotely from the ",(0,i.jsx)(n.strong,{children:"Server Manager"})," application."]}),"\n",(0,i.jsx)(n.p,{children:"This is a very normal on-prem setup, and you'll see why later on in the lab. It makes everything far easier and it's more secure."}),"\n",(0,i.jsx)(n.h3,{id:"part-1-removing-old-roles",children:"Part 1: Removing Old Roles"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Turn off all VMs."}),"\n",(0,i.jsxs)(n.li,{children:["Power on ",(0,i.jsx)(n.em,{children:"srv1"})," and login."]}),"\n",(0,i.jsxs)(n.li,{children:["In S",(0,i.jsx)(n.em,{children:"erver Manager > Remove Roles"}),":","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Roles > Select these roles (Remove features when asked):","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"DHCP"}),"\n",(0,i.jsx)(n.li,{children:"DNS"}),"\n",(0,i.jsx)(n.li,{children:"Remote Access"}),"\n",(0,i.jsx)(n.li,{children:"Hyper-V"}),"\n",(0,i.jsx)(n.li,{children:"IIS"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Do NOT select restart this server."})}),"\n",(0,i.jsx)(n.li,{children:"This may take a while!"}),"\n",(0,i.jsxs)(n.li,{children:["When complete, shut down ",(0,i.jsx)(n.em,{children:"srv1"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-2-hardware-changes-for-srv1",children:"Part 2: Hardware Changes for srv1"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Go into srv1's hardware properties in VMware (do not power on!)"}),"\n",(0,i.jsx)(n.li,{children:"Remove NIC1 (External Network)"}),"\n",(0,i.jsxs)(n.li,{children:["Reduce hardware:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["CPU: ",(0,i.jsx)(n.strong,{children:"4 cores"})]}),"\n",(0,i.jsxs)(n.li,{children:["RAM: ",(0,i.jsx)(n.strong,{children:"8 GB"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-3-network-configuration-srv1",children:"Part 3: Network Configuration (srv1)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Turn on ",(0,i.jsx)(n.em,{children:"router"})," VM."]}),"\n",(0,i.jsxs)(n.li,{children:["Power on ",(0,i.jsx)(n.em,{children:"srv1"})," and login."]}),"\n",(0,i.jsxs)(n.li,{children:["Set static network configuration for Internal Network NIC:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["IP address: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".1"]})]}),"\n",(0,i.jsxs)(n.li,{children:["Subnet: ",(0,i.jsx)(n.strong,{children:"255.255.255.0"})]}),"\n",(0,i.jsxs)(n.li,{children:["Gateway: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".254"]})]}),"\n",(0,i.jsxs)(n.li,{children:["DNS: ",(0,i.jsx)(n.strong,{children:"149.112.121.20"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Confirm Internet connection.","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["In Command Prompt, run: ",(0,i.jsx)(n.code,{children:"ping eff.org"})]}),"\n",(0,i.jsx)(n.li,{children:"Confirm it works. If not, ask for help!"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Delete VM disk directory, ",(0,i.jsx)(n.em,{children:"Virtual Hard Disks"}),": ",(0,i.jsx)(n.strong,{children:"C:\\ProgramData\\Microsoft\\Windows\\Hyper-V\\Virtual Hard Disks"})]}),"\n",(0,i.jsxs)(n.li,{children:["Shut down ",(0,i.jsx)(n.em,{children:"srv1"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"investigation-4-convert-srv2-to-ad-dc1",children:"Investigation 4: Convert srv2 to AD DC1"}),"\n",(0,i.jsxs)(n.p,{children:["In this investigation, we're going to promote ",(0,i.jsx)(n.em,{children:"srv2"})," to an ",(0,i.jsx)(n.strong,{children:"Active Directory Domain Controller"}),". As the first Core machine, we have to do this purely from the command line with PowerShell."]}),"\n",(0,i.jsx)(n.h3,{id:"part-1-network-reconfiguration-srv2",children:"Part 1: Network Reconfiguration (srv2)"}),"\n",(0,i.jsx)(n.p,{children:"Let's configure the server to be get it ready for Active Directory."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Remove NIC1 (External Network)"}),"\n",(0,i.jsxs)(n.li,{children:["Confirm hardware:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["CPU: ",(0,i.jsx)(n.strong,{children:"2 cores"})]}),"\n",(0,i.jsxs)(n.li,{children:["RAM: ",(0,i.jsx)(n.strong,{children:"4 GB"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Power on."}),"\n",(0,i.jsxs)(n.li,{children:["Change computer name from ",(0,i.jsx)(n.em,{children:"srv2-yourSenecaUsername"})," to ",(0,i.jsx)(n.em,{children:"srv2"}),". ",(0,i.jsx)(n.strong,{children:"Restart"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Log back in."}),"\n",(0,i.jsxs)(n.li,{children:["Set static network configuration for Internal Network NIC:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["IP address: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".2"]})]}),"\n",(0,i.jsxs)(n.li,{children:["Subnet: ",(0,i.jsx)(n.strong,{children:"255.255.255.0"})]}),"\n",(0,i.jsxs)(n.li,{children:["Gateway: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".254"]})]}),"\n",(0,i.jsxs)(n.li,{children:["DNS: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".2"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Note: If DHCP won't be removed, go to PowerShell and run: ",(0,i.jsx)(n.code,{children:'Set-NetIPInterface -InterfaceAlias "Internal Network" -Dhcp disabled'})]}),"\n",(0,i.jsxs)(n.li,{children:["Go back to ",(0,i.jsx)(n.em,{children:"sconfig"})," and rerun Step 6."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Exit to PowerShell."}),"\n",(0,i.jsxs)(n.li,{children:["Check Internet connection by running: ",(0,i.jsx)(n.code,{children:"ping 173.239.79.200"})]}),"\n",(0,i.jsx)(n.li,{children:"If ping is successful, move on to the next Investigation. If not, ask for help!"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-2-installing-ad-and-dc-promotion",children:"Part 2: Installing AD and DC Promotion"}),"\n",(0,i.jsxs)(n.p,{children:["Here, we install the Active Directory server role and then promote ",(0,i.jsx)(n.em,{children:"srv2"})," to be an AD Domain Controller."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Install the Active Directory role:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"Install-WindowsFeature AD-Domain-Services\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"This can take a while!"})," Be patient."]}),"\n",(0,i.jsx)(n.li,{children:"Promote srv2 to a domain controller:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"Install-ADDSForest -DomainName 'yourSenecaUsername.com' -DomainNetbiosName 'YOURSENECAUSERNAME' -InstallDNS -Force\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"When asked for a password, use the same one you've used for your Administrator accounts."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"This will take several minutes!"})," Your VM will restart and take a few more minutes. Be patient."]}),"\n",(0,i.jsxs)(n.li,{children:["Once you can, login with: ",(0,i.jsx)(n.code,{children:"YOURSENECAUSERNAME\\Administrator"})]}),"\n",(0,i.jsxs)(n.li,{children:["in sconfig, confirm you can see:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Computer name: ",(0,i.jsx)(n.strong,{children:"srv2"})]}),"\n",(0,i.jsxs)(n.li,{children:["Domain: ",(0,i.jsx)(n.strong,{children:"yourSenecaUsername.com"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Minimize srv2 VM but keep it on!"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"investigation-5-manage-srv2-from-srv1-gui",children:"Investigation 5: Manage srv2 from srv1 GUI"}),"\n",(0,i.jsxs)(n.p,{children:["Let's use ",(0,i.jsx)(n.em,{children:"srv1"}),"'s ",(0,i.jsx)(n.strong,{children:"Server Manager"})," to manage and configure ",(0,i.jsx)(n.em,{children:"srv2"}),"!"]}),"\n",(0,i.jsx)(n.h3,{id:"part-1-join-srv1-to-the-new-domain",children:"Part 1: Join srv1 to the new domain"}),"\n",(0,i.jsxs)(n.p,{children:["We now have an Active Directory domain, but we need to join ",(0,i.jsx)(n.em,{children:"srv1"})," to it."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Double-check the following VMs are already powered on:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"router"}),"\n",(0,i.jsx)(n.li,{children:"srv2"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Power on ",(0,i.jsx)(n.em,{children:"srv1"})," and login."]}),"\n",(0,i.jsxs)(n.li,{children:['Change "Internal Network" NIC DNS to: ',(0,i.jsx)(n.code,{children:"10.0."}),"UID",(0,i.jsx)(n.code,{children:".2"})]}),"\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.em,{children:"Computer Properties"}),", change the computer name from ",(0,i.jsx)(n.em,{children:"srv1-yourSenecaUsername"})," to ",(0,i.jsx)(n.em,{children:"srv1"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Restart and log back in."}),"\n",(0,i.jsxs)(n.li,{children:["Open ",(0,i.jsx)(n.em,{children:"Computer Properties"})," again, and click on ",(0,i.jsx)(n.strong,{children:"Workgroup"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.em,{children:"Domain"})," and enter: ",(0,i.jsx)(n.em,{children:"yourSenecaUsername.com"})]}),"\n",(0,i.jsx)(n.li,{children:"When asked for credentials, use your Administrator username and password."}),"\n",(0,i.jsx)(n.li,{children:"When it adds properly, you'll get a welcome message."}),"\n",(0,i.jsx)(n.li,{children:"The computer will now restart."}),"\n",(0,i.jsxs)(n.li,{children:["When the computer is up again, login using: ",(0,i.jsx)(n.strong,{children:"Other > YOURSENECAUSERNAME\\Administrator"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-2-setup-srv1-as-a-gui-management-server-for-srv2",children:"Part 2: Setup srv1 as a GUI Management Server for srv2"}),"\n",(0,i.jsxs)(n.p,{children:["This is where we add ",(0,i.jsx)(n.em,{children:"srv2"})," to ",(0,i.jsx)(n.em,{children:"Server Manager"})," for remote control. We also install a few features that help with that remote control."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.em,{children:"Server Manager"}),", go to ",(0,i.jsx)(n.strong,{children:"All Servers"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.em,{children:"Manage > Add Servers"})]}),"\n",(0,i.jsxs)(n.li,{children:["Click on ",(0,i.jsx)(n.strong,{children:"Find Now"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.em,{children:"srv2"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"OK"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["It may take a few moments to appear properly. ",(0,i.jsx)(n.strong,{children:'Ensure it says "Online - Performance counters not started."'})]}),"\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.em,{children:"Manage > Add Roles and Features"})]}),"\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"srv1"})," from the list."]}),"\n",(0,i.jsxs)(n.li,{children:["Skip ",(0,i.jsx)(n.em,{children:"Roles"}),", and select the following ",(0,i.jsx)(n.em,{children:"Features"}),":"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Remote Server Administration Tools > Role Administration Tools:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"AD DS and AD LDS Tools"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"DHCP Server Tools"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"DNS Server Tools"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Next"})," through the rest of the wizard and then ",(0,i.jsx)(n.strong,{children:"Install"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Any other message, ask for help!"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-3-configure-dns-on-srv2-with-srv1",children:"Part 3: Configure DNS on srv2 with srv1"}),"\n",(0,i.jsxs)(n.p,{children:["We're now going to set up Active Directory DNS on ",(0,i.jsx)(n.em,{children:"srv2"}),". This is much more advanced than the previous standalone DNS service we installed in a previous lab, and you'll see that shortly."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.em,{children:"Server Manager > Tools > DNS"})]}),"\n",(0,i.jsxs)(n.li,{children:['When asked to connect to a DNS server, select "The following computer" and enter: ',(0,i.jsx)(n.code,{children:"srv2"})]}),"\n",(0,i.jsxs)(n.li,{children:["You will now be connected to the DNS server on ",(0,i.jsx)(n.em,{children:"srv2"})," remotely, using the GUI on ",(0,i.jsx)(n.em,{children:"srv1"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Find ",(0,i.jsx)(n.em,{children:"srv2"})," in the list, right-click, and select ",(0,i.jsx)(n.strong,{children:"Properties"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Add forwarders: ",(0,i.jsx)(n.strong,{children:"149.112.121.20"})]}),"\n",(0,i.jsxs)(n.li,{children:["Right-click on ",(0,i.jsx)(n.strong,{children:"Reverse Lookup"})," and select ",(0,i.jsx)(n.strong,{children:"New Zone"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Stick with the wizard defaults until ",(0,i.jsx)(n.em,{children:"Network ID"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Enter Network ID: ",(0,i.jsx)(n.code,{children:"10.0."}),"UID``"]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Next"})," and then ",(0,i.jsx)(n.strong,{children:"Finish"})," through the rest of the wizard."]}),"\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.em,{children:"Reverse Lookup Zones > 45.0.10.in-addr.arpa"})]}),"\n",(0,i.jsx)(n.li,{children:"Notice the list is currently empty."}),"\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"ipconfig /registerdns"})," on both ",(0,i.jsx)(n.em,{children:"srv1"})," and ",(0,i.jsx)(n.em,{children:"srv2"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Refresh the view in reverse lookup and confirm the two server entries."}),"\n",(0,i.jsxs)(n.li,{children:["Check the ",(0,i.jsx)(n.em,{children:"Forward Lookup Zone > yourSenecaUsername.com"}),". Your two servers are already there!"]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"srv1"}),", open ",(0,i.jsx)(n.strong,{children:"Command Prompt"})," and run:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"ipconfig /flushdns\nnslookup srv2\nnslookup srv1\nnslookup eff.org\nping srv2\nping eff.org\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"16",children:["\n",(0,i.jsxs)(n.li,{children:["Open Firefox and go to: ",(0,i.jsx)(n.strong,{children:"reddit.com"})]}),"\n",(0,i.jsxs)(n.li,{children:["If those two steps worked, you now have full Internet using the DNS service on ",(0,i.jsx)(n.em,{children:"srv2"}),"!"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Notice how you didn't have to create any A or PTR records! The servers self-registered. ",(0,i.jsx)(n.em,{children:"How cool is that?"})]}),"\n",(0,i.jsxs)(n.h3,{id:"part-4-configure-dhcp-on-srv2-with-srv1",children:["Part 4: Configure DHCP on ",(0,i.jsx)(n.em,{children:"srv2"})," with ",(0,i.jsx)(n.em,{children:"srv1"})]}),"\n",(0,i.jsxs)(n.p,{children:["We're now going to set up Active Directory DHCP on ",(0,i.jsx)(n.em,{children:"srv2"}),". As with DNS, this is much more advanced than the standalone we did earlier."]}),"\n",(0,i.jsxs)(n.p,{children:["Unlike DNS, which was installed along with the AD Domain Controller, the DHCP role isn't currently on ",(0,i.jsx)(n.em,{children:"srv2"}),". We have to install it and then configure."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.em,{children:"Server Manager > Manage > Add Roles and Features"})]}),"\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"srv2"})," from the list."]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"WARNING:"})," Make sure you select ",(0,i.jsx)(n.em,{children:"srv2"}),"! Not ",(0,i.jsx)(n.em,{children:"srv1"}),"!"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Select the DHCP role."}),"\n",(0,i.jsx)(n.li,{children:"Go through the DHCP wizard and finish."}),"\n",(0,i.jsxs)(n.li,{children:["When installation is complete, click on ",(0,i.jsx)(n.strong,{children:"Complete DHCP configuration"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Next"})," and then ",(0,i.jsx)(n.strong,{children:"Commit"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Close the window."}),"\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.em,{children:"Server Manager > Tools > DHCP"})]}),"\n",(0,i.jsxs)(n.li,{children:["Right-click the DHCP entry in the left and select ",(0,i.jsx)(n.strong,{children:"Manage authorized servers..."})]}),"\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.em,{children:"srv2"}),", then click ",(0,i.jsx)(n.strong,{children:"OK"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["In the new ",(0,i.jsx)(n.em,{children:"srv2"})," entry, create a new scope."]}),"\n",(0,i.jsxs)(n.li,{children:["Configure it with the following:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Name: ",(0,i.jsx)(n.strong,{children:"OSM620 Fall 2025 - AD DHCP"})]}),"\n",(0,i.jsxs)(n.li,{children:["Range: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".1 - 10.0.",(0,i.jsx)(n.code,{children:"UID"}),".254"]})]}),"\n",(0,i.jsxs)(n.li,{children:["Exclude:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".1-10.0.",(0,i.jsx)(n.code,{children:"UID"}),".9"]})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".254"]})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Router: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".254"]})]}),"\n",(0,i.jsxs)(n.li,{children:["DNS:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["DNS1: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".2"]})]}),"\n",(0,i.jsxs)(n.li,{children:["DNS2: ",(0,i.jsxs)(n.strong,{children:["10.0.",(0,i.jsx)(n.code,{children:"UID"}),".3"]})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["WINS: ",(0,i.jsx)(n.strong,{children:"Leave defaults"})]}),"\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"Activate now"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Back in the main DHCP window, go to the ",(0,i.jsx)(n.em,{children:"IPv4"})," folder, right-click, and select ",(0,i.jsx)(n.strong,{children:"Properties"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Click the DNS tab."}),"\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"Always dynamically update DNS records"})]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"OK"})]}),"\n",(0,i.jsx)(n.li,{children:"That's it, you're done!"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"investigation-6-add-laptop1-to-domain",children:"Investigation 6: Add laptop1 to Domain"}),"\n",(0,i.jsxs)(n.p,{children:["Now that we've set up our AD Domain Controller on ",(0,i.jsx)(n.em,{children:"srv2"})," and remote control on ",(0,i.jsx)(n.em,{children:"srv1"}),", it's time to add a normal client machine to our Active Directory domain. We'll use ",(0,i.jsx)(n.em,{children:"laptop1"})," for this."]}),"\n",(0,i.jsx)(n.p,{children:'The initial "join to AD" is typically done by an administrator such as yourself. After the laptop is part of the AD domain, you would then give it to the employee.'}),"\n",(0,i.jsx)(n.h3,{id:"part-1-setting-proper-network-configuration",children:"Part 1: Setting Proper Network Configuration"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Have the following VMs powered on:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"router"}),"\n",(0,i.jsx)(n.li,{children:"srv2"}),"\n",(0,i.jsx)(n.li,{children:"srv1 (if you have the hardware resources)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Before powering on ",(0,i.jsx)(n.em,{children:"laptop1"}),", check NIC1 in VMware. Make sure it's set to ",(0,i.jsx)(n.strong,{children:"VMnet10"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Power on ",(0,i.jsx)(n.em,{children:"laptop1"})," and login."]}),"\n",(0,i.jsxs)(n.li,{children:["If you named this machine ",(0,i.jsx)(n.em,{children:"laptop1-yourSenecaUsername"}),", change it to ",(0,i.jsx)(n.em,{children:"laptop1"})," and restart."]}),"\n",(0,i.jsxs)(n.li,{children:["Check Windows NIC1 network settings. They should be set to ",(0,i.jsx)(n.strong,{children:"DHCP"}),".","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["If it was static until now, open ",(0,i.jsx)(n.strong,{children:"Command Prompt"})," and run to check it has an Internet connection:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ipconfig /release"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ipconfig /renew"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["In Command Prompt, run: ",(0,i.jsx)(n.code,{children:"ipconfig /all"})]}),"\n",(0,i.jsxs)(n.li,{children:["Check the information. You should have a 10.0.",(0,i.jsx)(n.code,{children:"UID"}),".x address, DNS as ",(0,i.jsx)(n.em,{children:"srv2"}),", and gateway as 10.0.",(0,i.jsx)(n.code,{children:"UID"}),".254."]}),"\n",(0,i.jsx)(n.li,{children:"In Command Prompt, run:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"ipconfig /flushdns\nnslookup srv1\nnslookup srv2\nnslookup eff.org\nping srv1\nping srv2\nping eff.org\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"9",children:["\n",(0,i.jsxs)(n.li,{children:["Back on ",(0,i.jsx)(n.em,{children:"srv1"}),", go to ",(0,i.jsx)(n.em,{children:"Server Manager > Tools > DHCP"})]}),"\n",(0,i.jsxs)(n.li,{children:["In the DHCP window, go to: ",(0,i.jsx)(n.em,{children:"srv2 > IPv4 > Scope > Leases"})]}),"\n",(0,i.jsxs)(n.li,{children:["You should see your ",(0,i.jsx)(n.em,{children:"laptop1"})," in the leases section."]}),"\n",(0,i.jsx)(n.li,{children:"If all this works, continue to the next section!"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Laptop1"})," now has a stable Internet connection using DHCP and DNS from ",(0,i.jsx)(n.em,{children:"srv2"}),", and is routing to the Internet through the ",(0,i.jsx)(n.em,{children:"router"})," VM."]}),"\n",(0,i.jsx)(n.h3,{id:"part-2-domain-join-for-laptop1",children:"Part 2: Domain Join for laptop1"}),"\n",(0,i.jsxs)(n.p,{children:["Now, it's time to join ",(0,i.jsx)(n.em,{children:"laptop1"})," to our AD domain."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open ",(0,i.jsx)(n.em,{children:"Settings > System > About"})," (at the very bottom)"]}),"\n",(0,i.jsxs)(n.li,{children:["Click on the ",(0,i.jsx)(n.strong,{children:"Domain or workgroup"})," link."]}),"\n",(0,i.jsxs)(n.li,{children:["In the new ",(0,i.jsx)(n.em,{children:"System Properties > Computer Name"})," tab, click on ",(0,i.jsx)(n.strong,{children:"Change"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Change from workgroup to domain: ",(0,i.jsx)(n.strong,{children:"yourSenecaUsername.com"})]}),"\n",(0,i.jsxs)(n.li,{children:["Authenticate the same as you did with ",(0,i.jsx)(n.em,{children:"srv1"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"After the congratulations message, allow the machine to restart."}),"\n",(0,i.jsx)(n.li,{children:"Do not log in with your normal account."}),"\n",(0,i.jsxs)(n.li,{children:["Click on Other, and use: ",(0,i.jsx)(n.strong,{children:"YOURSENECAUSERNAME\\Administrator"})]}),"\n",(0,i.jsx)(n.li,{children:"Your profile make take a minute to setup. That's normal."}),"\n",(0,i.jsx)(n.li,{children:"Once you see the desktop, minimize this VM."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-3-confirm-laptop1-is-in-dns",children:"Part 3: Confirm laptop1 is in DNS"}),"\n",(0,i.jsxs)(n.p,{children:["Let's check that ",(0,i.jsx)(n.em,{children:"laptop1"})," auto-registered to DNS after the AD join."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.em,{children:"srv1"}),", open the DNS tool."]}),"\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.em,{children:"srv2 > IPv4 > Forward Lookup Zone"})]}),"\n",(0,i.jsx)(n.li,{children:"Do you see laptop1? If yes, congrats! It auto-registered, just as we wanted."}),"\n",(0,i.jsx)(n.li,{children:"If not, ask for help. Do not continue."}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"investigation-7-convert-srv3-to-ad-dc2",children:["Investigation 7: Convert ",(0,i.jsx)(n.em,{children:"srv3"})," to AD DC2"]}),"\n",(0,i.jsxs)(n.p,{children:["In this investigation, we'll create a second AD Domain Controller by using ",(0,i.jsx)(n.em,{children:"srv3"}),". This is a much simpler process than ",(0,i.jsx)(n.em,{children:"srv2"}),", as we can use ",(0,i.jsx)(n.em,{children:"srv1"})," for part of it."]}),"\n",(0,i.jsxs)(n.h3,{id:"part-1-domain-join-for-srv3",children:["Part 1: Domain Join for ",(0,i.jsx)(n.em,{children:"srv3"})]}),"\n",(0,i.jsxs)(n.p,{children:["Time to add ",(0,i.jsx)(n.em,{children:"srv3"})," to our new AD domain."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Power on ",(0,i.jsx)(n.em,{children:"srv2"})," and ",(0,i.jsx)(n.em,{children:"router"})," (if not already on). Leave all other VMs off."]}),"\n",(0,i.jsxs)(n.li,{children:["Power on ",(0,i.jsx)(n.em,{children:"srv3"})," and login."]}),"\n",(0,i.jsxs)(n.li,{children:["Change workgroup to domain: ",(0,i.jsx)(n.strong,{children:"yourSenecaUsername.com"})]}),"\n",(0,i.jsx)(n.li,{children:"Authenticate with your Administrator credentials when asked."}),"\n",(0,i.jsx)(n.li,{children:"The computer will restart. This will take some time."}),"\n",(0,i.jsxs)(n.li,{children:["Once you can, login with ",(0,i.jsx)(n.code,{children:"YOURSENECAUSERNAME\\Administrator"})," by hitting the ESC key on your keyboard. (Twice.)"]}),"\n",(0,i.jsxs)(n.li,{children:["When it says ",(0,i.jsx)(n.em,{children:"Select a user"}),", select ",(0,i.jsx)(n.strong,{children:"Other user"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["In the next page, use the following credentials to login (tab on your keyboard to go to the next field):","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["User name: ",(0,i.jsx)(n.strong,{children:"YOURSENECAUSERNAME\\Administrator"})]}),"\n",(0,i.jsxs)(n.li,{children:["Password: ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"yournormalpassword"})})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["If it asks you about diagnostics again, select ",(0,i.jsx)(n.strong,{children:"1"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["In sconfig, confirm you can see:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Computer name: ",(0,i.jsx)(n.strong,{children:"srv3"})]}),"\n",(0,i.jsxs)(n.li,{children:["Domain: ",(0,i.jsx)(n.strong,{children:"yourSenecaUsername.com"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Minimize ",(0,i.jsx)(n.em,{children:"srv3"})," VM but keep it on!"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"part-2-install-ad-and-dc-promotion-srv3",children:"Part 2: Install AD and DC Promotion (srv3)"}),"\n",(0,i.jsxs)(n.p,{children:["Now, let's use ",(0,i.jsx)(n.em,{children:"srv1"}),"'s ",(0,i.jsx)(n.strong,{children:"Server Manager"})," to install the Active Directory role on ",(0,i.jsx)(n.em,{children:"srv3"})," and promote ",(0,i.jsx)(n.em,{children:"srv3"})," to a secondary Domain Controller. All remotely through the GUI."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Power on srv1 and login using: ",(0,i.jsx)(n.strong,{children:"YOURSENECAUSERNAME\\Administrator"})]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"NOTE:"})," You ",(0,i.jsx)(n.strong,{children:"must"})," login as the domain administrator. Otherwise, none of this will work!"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In Server Manager, go to All Servers."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click on ",(0,i.jsx)(n.em,{children:"Manage > Add Servers"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Add ",(0,i.jsx)(n.em,{children:"srv3"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["This will take a few minutes to process. ",(0,i.jsx)(n.strong,{children:'Wait until the SRV3 line says: "Online - Performance counters not started."'})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In Server Manager, add a new role. (",(0,i.jsx)(n.em,{children:"Manage > Add Roles and Features"}),")"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Select: ",(0,i.jsx)(n.strong,{children:"srv3"})]}),"\n",(0,i.jsxs)(n.li,{children:["Select: ",(0,i.jsx)(n.strong,{children:"Active Directory Domain Services"})]}),"\n",(0,i.jsxs)(n.li,{children:["Go through wizard and select defaults until you get to the ",(0,i.jsx)(n.em,{children:"Confirmation"})," page."]}),"\n",(0,i.jsxs)(n.li,{children:["On the ",(0,i.jsx)(n.em,{children:"Confirmation"})," page, select the option ",(0,i.jsx)(n.strong,{children:'"Restart the destination server automatically if required"'}),", then click ",(0,i.jsx)(n.strong,{children:"Install"})]}),"\n",(0,i.jsxs)(n.li,{children:["Active Directory will now install onto ",(0,i.jsx)(n.em,{children:"srv3"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["When complete, the ",(0,i.jsx)(n.strong,{children:"Promote this server to a domain controller"})," link is active on the ",(0,i.jsx)(n.em,{children:"Results"})," page. ",(0,i.jsx)(n.strong,{children:"Click it"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.em,{children:"Active Directory Domain Services Configuration Wizard"})," now opens."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Keep the defaults on the first page, but click on the ",(0,i.jsx)(n.strong,{children:"Change..."})," button. We need to authorize this connection."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The credentials window opens. Enter the following:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["User name: ",(0,i.jsx)(n.strong,{children:"Administrator"})]}),"\n",(0,i.jsxs)(n.li,{children:["Password: ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"yournormalpassword"})})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Back in the main wizard, click ",(0,i.jsx)(n.strong,{children:"Next"}),","]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["On the next page, its asking for a ",(0,i.jsx)(n.em,{children:"DSRM password"}),". Enter the same password you've been using for all your admin accounts."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Keep all other defaults and click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The DNS page gives you a warning. Don't worry about it and click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["On the ",(0,i.jsx)(n.em,{children:"Additional options"})," page, for the ",(0,i.jsx)(n.em,{children:"Replicate from:"})," field, select ",(0,i.jsx)(n.em,{children:"srv2"})," from the drop down. Click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.strong,{children:"Next"})," on the rest of the pages to accept defaults until you arrive on ",(0,i.jsx)(n.em,{children:"Prerequisites Check"})," page."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Look for the green check mark that says: ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:'"All prerequisites checks passed successfully. Click Install to begin installation."'})})]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"NOTE: If you do NOT see the green check mark, do not continue! Ask for help!"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.strong,{children:"Install"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"It will now install. The DNS warning will come up again. Continue to ignore it."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Once it finishes, click ",(0,i.jsx)(n.strong,{children:"Close"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Give it a few minutes as it processes."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["When the ",(0,i.jsx)(n.em,{children:"srv3"})," VM is back to the login screen, go to ",(0,i.jsx)(n.em,{children:"srv1"}),". (This will take a few minutes.)"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Open ",(0,i.jsx)(n.strong,{children:"Server Manager"})," on ",(0,i.jsx)(n.em,{children:"srv1"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.strong,{children:"AD DS"})," and confirm ",(0,i.jsx)(n.em,{children:"srv3"})," is there."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["It may take a few moments to appear properly. ",(0,i.jsx)(n.strong,{children:'Ensure it says "Online - Performance counters not started."'})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Any other message, ask for help!"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You have now converted ",(0,i.jsx)(n.em,{children:"srv3"})," into our second AD Domain Controller, mostly using the GUI remotely!"]}),"\n",(0,i.jsx)(n.h3,{id:"part-3-confirm-dns-replication",children:"Part 3: Confirm DNS replication"}),"\n",(0,i.jsx)(n.p,{children:"Always confirm your work. Let's check on DNS."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["In ",(0,i.jsx)(n.em,{children:"srv1"}),", open the DNS tool."]}),"\n",(0,i.jsxs)(n.li,{children:["When asked, tell it to connect to ",(0,i.jsx)(n.strong,{children:"srv3"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["In the new window, right-click on DNS and select ",(0,i.jsx)(n.strong,{children:"Connect to DNS Server"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.em,{children:"srv2"})," to your list of servers in DNS."]}),"\n",(0,i.jsxs)(n.li,{children:["Open ",(0,i.jsx)(n.em,{children:"IPv4 > Forward Lookup Zones"})," in both ",(0,i.jsx)(n.em,{children:"srv2"})," and ",(0,i.jsx)(n.em,{children:"srv3"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"They should look identical."}),"\n",(0,i.jsx)(n.li,{children:"If they do, then DNS replication is working."}),"\n",(0,i.jsx)(n.li,{children:"Congratulations, you now have two Domain Controllers!"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This confirms ",(0,i.jsx)(n.em,{children:"srv2"})," and ",(0,i.jsx)(n.em,{children:"srv3"})," are communicating and syncing information, including DNS records."]}),"\n",(0,i.jsx)(n.h2,{id:"investigation-8-test-without-srv1",children:"Investigation 8: Test Without srv1"}),"\n",(0,i.jsx)(n.p,{children:"In this investigation, we'll explore the consequences of what we've set up in this lab and how much more efficient on hardware resources it is."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Shut down ",(0,i.jsx)(n.em,{children:"srv1"})," and ",(0,i.jsx)(n.em,{children:"srv3"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Have the following VMs powered on:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"router"}),"\n",(0,i.jsx)(n.li,{children:"srv2"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Power on ",(0,i.jsx)(n.em,{children:"laptop1"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Login to ",(0,i.jsx)(n.em,{children:"laptop1"})," with: ",(0,i.jsx)(n.strong,{children:"YOURSENECAUSERNAME\\Administrator"})]}),"\n",(0,i.jsxs)(n.li,{children:["Use Command Prompt and run: ",(0,i.jsx)(n.code,{children:"ipconfig /all"})]}),"\n",(0,i.jsx)(n.li,{children:"Does it look correct? If so, move to the next step."}),"\n",(0,i.jsxs)(n.li,{children:["Open ",(0,i.jsx)(n.em,{children:"Firefox"})," and go to: ",(0,i.jsx)(n.strong,{children:"reddit.com"})]}),"\n",(0,i.jsxs)(n.li,{children:["Did that work? If so, move to the next step. ",(0,i.jsx)(n.strong,{children:"Otherwise, ask for help."})]}),"\n",(0,i.jsx)(n.li,{children:"In Command Prompt, run:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"ipconfig /flushdns\nnslookup srv1\nnslookup srv2\nnslookup srv3\nnslookup eff.org\nping srv1\nping srv2\nping srv3\nping eff.org\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"10",children:["\n",(0,i.jsx)(n.li,{children:"Why did some of these work and not the others?"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Congrats! You now have a low profile Domain Controller. Resource usage is at a minimum."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"A note about Hyper-V:"})," In a real production environment, we could use ",(0,i.jsx)(n.em,{children:"srv1"})," to install Hyper-V VMs on ",(0,i.jsx)(n.em,{children:"srv2"}),", allowing us to run these VMs on a lower resource Core machine. That's beyond the scope of this course, but something cool to know."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"lab-6-sign-off",children:"Lab 6 Sign-Off"}),"\n",(0,i.jsx)(n.p,{children:"It\u2019s essential to complete Lab 6 correctly. All later labs assume working Active Directory Domain Controllers and its services."}),"\n",(0,i.jsx)(n.p,{children:"When you finish Lab 6, ask your instructor for a sign-off."}),"\n",(0,i.jsx)(n.h3,{id:"sign-off-checklist",children:"Sign-Off Checklist"}),"\n",(0,i.jsx)(n.p,{children:"Please have the following on screen and ready to show. You will need to power on ALL VMs for the check."}),"\n",(0,i.jsx)(n.p,{children:"On srv1:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Server Manager > All Server"}),"s: Shows ",(0,i.jsx)(n.em,{children:"srv1"}),", ",(0,i.jsx)(n.em,{children:"srv2"}),", and ",(0,i.jsx)(n.em,{children:"srv3"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.em,{children:"Server Manager > AD DS"}),": Shows ",(0,i.jsx)(n.em,{children:"srv2"})," and ",(0,i.jsx)(n.em,{children:"srv3"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ipconfig /all"})," shows the correct information."]}),"\n",(0,i.jsx)(n.li,{children:"Firefox loads eff.org."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"On srv2:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Sconfig shows:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Name: ",(0,i.jsx)(n.strong,{children:"srv2"})]}),"\n",(0,i.jsxs)(n.li,{children:["Domain: ",(0,i.jsx)(n.strong,{children:"yourSenecaUsername.com"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["In PowerShell, ",(0,i.jsx)(n.code,{children:"ipconfig /all"})," shows the correct information."]}),"\n",(0,i.jsxs)(n.li,{children:["You can ping:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"srv1"}),"\n",(0,i.jsx)(n.li,{children:"srv3"}),"\n",(0,i.jsx)(n.li,{children:"laptop1"}),"\n",(0,i.jsx)(n.li,{children:"eff.org"}),"\n",(0,i.jsx)(n.li,{children:"reddit.com"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"On srv2:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Sconfig shows:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Name: ",(0,i.jsx)(n.strong,{children:"srv3"})]}),"\n",(0,i.jsxs)(n.li,{children:["Domain: ",(0,i.jsx)(n.strong,{children:"yourSenecaUsername.com"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["In PowerShell, ",(0,i.jsx)(n.code,{children:"ipconfig /all"})," shows the correct information."]}),"\n",(0,i.jsxs)(n.li,{children:["You can ping:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"srv1"}),"\n",(0,i.jsx)(n.li,{children:"srv3"}),"\n",(0,i.jsx)(n.li,{children:"laptop1"}),"\n",(0,i.jsx)(n.li,{children:"eff.org"}),"\n",(0,i.jsx)(n.li,{children:"reddit.com"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"On laptop1:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["System Properties shows:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Name: ",(0,i.jsx)(n.strong,{children:"laptop1"})]}),"\n",(0,i.jsxs)(n.li,{children:["Domain: ",(0,i.jsx)(n.strong,{children:"yourSenecaUsername.com"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["In Command Prompt, ",(0,i.jsx)(n.code,{children:"ipconfig /all"})," shows the correct information."]}),"\n",(0,i.jsxs)(n.li,{children:["You can ping:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"srv1"}),"\n",(0,i.jsx)(n.li,{children:"srv2"}),"\n",(0,i.jsx)(n.li,{children:"srv3"}),"\n",(0,i.jsx)(n.li,{children:"eff.org"}),"\n",(0,i.jsx)(n.li,{children:"reddit.com"}),"\n",(0,i.jsxs)(n.li,{children:["In Firefox: ",(0,i.jsx)(n.code,{children:"http://www.reddit.com"})," loads the Reddit main page."]}),"\n"]}),"\n"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);